<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ‚ æ”¶åˆ°ä¸€ä»½ç‰¹åˆ«çš„ç¥ç¦</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-color: #f0f0f0;
            font-family: "Microsoft YaHei", sans-serif;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 1s ease;
        }

        /* --- 1. èƒŒæ™¯å¹»ç¯ç‰‡å±‚ (ä½ ä¹‹å‰æ¼æ‰äº†å¯¹åº”çš„HTMLæ ‡ç­¾) --- */
        #bg-slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* æœ€åº•å±‚ */
            background-size: cover; /* é“ºæ»¡ */
            background-position: center center; /* å±…ä¸­ */
            background-repeat: no-repeat;
            transition: background-image 1s ease-in-out;
        }

        /* --- 2. é®ç½©å±‚ (è®©å­—çœ‹å¾—æ¸…) --- */
        #bg-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: rgba(255, 255, 255, 0.5); /* åŠé€æ˜ç™½åº• */
            backdrop-filter: blur(3px); /* è½»å¾®æ¨¡ç³ŠèƒŒæ™¯ */
        }

        #start-container {
            z-index: 9999;
            position: relative;
        }
        
        #start-btn {
            padding: 15px 40px;
            font-size: 22px;
            background: linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            animation: pulse 1.5s infinite;
        }

        #final-card {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            background: rgba(255, 255, 255, 0.6);
            padding: 20px;
            width:60%;
            border-radius: 30px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 2s;
        }

        .cake-icon { font-size: 60px; display: block; margin-bottom: 10px; }
        h1 { color: #ff6b6b; margin: 10px 0; font-size: 1.8rem; }
        p { color: #666; font-size: 1rem; line-height: 1.6; }

        .fake-window {
            position: absolute;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-size: 14px;
            font-weight: bold;
            color: #333;
            border: 1px solid rgba(0,0,0,0.1);
            transform: scale(0); 
            animation: popIn 0.3s forwards;
            pointer-events: none;
            white-space: nowrap;
            z-index: 100;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes popIn {
            to { transform: scale(1); }
        }
    </style>
</head>
<body>

    <div id="bg-slideshow"></div>
    <div id="bg-overlay"></div>
    <div id="start-container">
        <button id="start-btn" onclick="startCelebration()">ç‚¹å‡»è¿è¡Œ Python è„šæœ¬ ğŸ</button>
    </div>

    <div id="final-card">
        <span class="cake-icon">ğŸ‚</span>
        <h1>Happy Birthday, yzr!</h1>
        <p>
            æ‰€æœ‰çš„å¼¹çª—éƒ½æ˜¯ä¸ºä½ è€Œå¼€<br>
            ç¥ä½ 19å²ç”Ÿæ—¥å¿«ä¹ï¼<br>
        </p>
    </div>

    <script>
        // === æ³¨æ„ï¼šä½ æ”¹æˆäº† pngï¼Œè¯·ç¡®ä¿æ–‡ä»¶å¤¹é‡Œç¡®å®æ˜¯ png ===
        const photoList = [
            "1.png", "2.png", "3.png", "4.png", "5.png", 
            "6.png", "7.png", "8.png", "9.png", "10.png", 
            "11.png", "12.png", "13.png"
        ];
        
        // é¢„åŠ è½½å›¾ç‰‡
        photoList.forEach(img => {
            new Image().src = `photos/${img}`;
        });

        // è½®æ’­é€»è¾‘
        let currentPhotoIndex = 0;
        function startSlideshow() {
            const bgDiv = document.getElementById('bg-slideshow');
            // å¦‚æœ bgDiv æ‰¾ä¸åˆ°ï¼Œè¿™é‡Œå°±ä¼šæŠ¥é”™ï¼Œç°åœ¨åŠ äº† div å°±å¥½äº†
            if (bgDiv) {
                bgDiv.style.backgroundImage = `url('photos/${photoList[0]}')`;
                setInterval(() => {
                    currentPhotoIndex = (currentPhotoIndex + 1) % photoList.length;
                    const nextImg = photoList[currentPhotoIndex];
                    bgDiv.style.backgroundImage = `url('photos/${nextImg}')`;
                }, 3000);
            } else {
                console.error("é”™è¯¯ï¼šæ‰¾ä¸åˆ°èƒŒæ™¯div");
            }
        }

        startSlideshow();

        const tips = [
            'ç¥yzr 19å²ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚', 'ç¥ä½ å¿«ä¹ï¼Œç¥ä½ å¥åº·', 'æ„¿ä½ å‰ç¨‹ä¼¼é”¦',
            'å¤©å¤©å¼€å¿ƒ', 'ç”Ÿæ—¥å¿«ä¹ï¼ŒyzråŒå­¦ï¼', 'æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½é¡ºé¡ºåˆ©åˆ©',
            'ç”Ÿæ—¥å¿«ä¹ï¼Œå¿ƒæƒ³äº‹æˆ', 'ç¥ç¦æ¥è‡ªå—äº¬', 'æ„¿ä½ æ¢¦æƒ³æˆçœŸ',
            'Happy Birthday!'
        ];

        const bgColors = [
            'skyblue', 'lightgreen', 'lavender', 'lightyellow', 'plum', 
            'coral', 'bisque', 'aquamarine', 'mistyrose', 'honeydew', 'lavenderblush', 'oldlace'
        ];

        const melody = [
            [392, 500], [392, 500], [440, 1000], [392, 1000], [523, 1000], [494, 2000],
            [392, 500], [392, 500], [440, 1000], [392, 1000], [587, 1000], [523, 2000],
            [392, 500], [392, 500], [784, 1000], [659, 1000], [523, 1000], [494, 1000], [440, 2000],
            [698, 500], [698, 500], [659, 1000], [523, 1000], [587, 1000], [523, 2000],
            [392, 500], [392, 500], [440, 1000], [392, 1000], [523, 1000], [494, 2000],
            [392, 500], [392, 500], [440, 1000], [392, 1000], [587, 1000], [523, 2000]
        ];

        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioCtx;

        function playTone(freq, duration, startTime) {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = 'square'; 
            oscillator.frequency.value = freq;
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            gainNode.gain.setValueAtTime(0, startTime);
            gainNode.gain.linearRampToValueAtTime(0.1, startTime + 0.01);
            gainNode.gain.linearRampToValueAtTime(0, startTime + duration / 1000);
            oscillator.start(startTime);
            oscillator.stop(startTime + duration / 1000);
        }

        function startMusic() {
            if (!audioCtx) audioCtx = new AudioContext();
            let currentTime = audioCtx.currentTime;
            melody.forEach(note => {
                playTone(note[0], note[1], currentTime);
                currentTime += note[1] / 1000;
            });
        }

        function createPopup() {
            const div = document.createElement('div');
            div.className = 'fake-window';
            div.innerText = tips[Math.floor(Math.random() * tips.length)];
            div.style.backgroundColor = bgColors[Math.floor(Math.random() * bgColors.length)];
            const x = Math.random() * (window.innerWidth - 150);
            const y = Math.random() * (window.innerHeight - 50);
            div.style.left = x + 'px';
            div.style.top = y + 'px';
            document.body.appendChild(div);
            setTimeout(() => {
                div.style.transition = 'opacity 1s';
                div.style.opacity = 0;
                setTimeout(() => div.remove(), 1000);
            }, 4000);
        }

        function startCelebration() {
            document.getElementById('start-btn').style.display = 'none';
            const finalCard = document.getElementById('final-card');
            finalCard.style.display = 'block';
            setTimeout(() => finalCard.style.opacity = '1', 100);
            
            // ä¸ºäº†è®©èƒŒæ™¯å›¾çœ‹å¾—æ›´æ¸…ï¼Œå¯ä»¥æŠŠ body èƒŒæ™¯è®¾é€æ˜ä¸€ç‚¹ï¼Œæˆ–è€…ä¿æŒåŸæ ·
            // document.body.style.background = 'transparent'; 

            startMusic();
            
            let count = 0;
            const maxPopups = 120;
            const interval = setInterval(() => {
                createPopup();
                count++;
                if (count >= maxPopups) clearInterval(interval);
            }, 200);
        }
    </script>
</body>
</html>